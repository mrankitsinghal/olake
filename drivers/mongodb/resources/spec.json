{
    "type": "object",
    "properties": {
        "authdb": {
            "type": "string",
            "title": "Auth DB",
            "description": "Authentication database (mostly admin)",
            "default": "admin"
        },
        "backoff_retry_count": {
            "type": "integer",
            "title": "Retry Count",
            "description": "Number of sync retry attempts using exponential backoff",
            "default": 3
        },
        "chunking_strategy": {
            "type": "string",
            "title": "Chunking Strategy",
            "description": "Chunking strategy (timestamp, uses Split Vector strategy if the field is left empty)",
            "default": "Split Vector",
            "enum": [
                "Split Vector",
                "Timestamp"
            ]
        },
        "database": {
            "type": "string",
            "title": "Database Name",
            "description": "Name of the mongodb database selected for replication"
        },
        "hosts": {
            "type": "array",
            "title": "Hosts",
            "description": "Specifies the hostnames or IP addresses of MongoDB for connection",
            "items": {
                "type": "string"
            },
            "minItems": 1
        },
        "max_threads": {
            "type": "integer",
            "title": "Max Threads",
            "description": "Max parallel threads for chunk snapshotting",
            "default": 3
        },
        "password": {
            "type": "string",
            "title": "Password",
            "description": "Password with the username for authentication",
            "format": "password"
        },
        "read_preference": {
            "type": "string",
            "title": "Read Preference",
            "description": "Read preference for MongoDB (e.g., secondaryPreferred)"
        },
        "replica_set": {
            "type": "string",
            "title": "Replica Set",
            "description": "MongoDB replica set name (if applicable)"
        },
        "srv": {
            "type": "boolean",
            "title": "Use SRV",
            "description": "Enable this option if using DNS SRV connection strings. When set to true, the hosts field must contain only one entry - a DNS SRV address (['mongodataset.pigiy.mongodb.net'])",
            "default": false
        },
        "username": {
            "type": "string",
            "title": "Username",
            "description": "Username for MongoDB authentication"
        },
        "use_iam": {
            "type": "boolean",
            "title": "IAM Authentication",
            "description": "Enable this option to use IAM-based authentication instead of username and password",
            "default": false
        },
        "ssh_config": {
            "title": "SSH Config",
            "description": "OLake uses SSH to connect to the database.",
            "oneOf": [
                {
                    "type": "object",
                    "title": "No Tunnel",
                    "properties": {
                        "type": {
                            "const": "no_tunnel"
                        }
                    },
                    "required": ["type"]
                },
                {
                    "type": "object",
                    "title": "SSH Key Authentication",
                    "properties": {
                        "type": {
                            "const": "ssh_key_authentication"
                        },
                        "host": {
                            "type": "string",
                            "title": "SSH Host",
                            "description": "SSH host address"
                        },
                        "port": {
                            "type": "integer",
                            "title": "SSH Port",
                            "description": "Port number to connect to the SSH server"
                        },
                        "username": {
                            "type": "string",
                            "title": "SSH Username",
                            "description": "Username to authenticate with the SSH server"
                        },
                        "private_key": {
                            "type": "string",
                            "title": "SSH Private Key",
                            "description": "SSH private key to authenticate with the SSH server"
                        },
                        "passphrase": {
                            "type": "string",
                            "title": "SSH Passphrase",
                            "description": "Passphrase to decrypt the encrypted SSH private key",
                            "format": "password"
                        }
                    },
                    "required": [
                        "host",
                        "port",
                        "username",
                        "private_key",
                        "type"
                    ]
                },
                {
                    "type": "object",
                    "title": "SSH Password Authentication",
                    "properties": {
                        "type": {
                            "const": "ssh_password_authentication"
                        },
                        "host": {
                            "type": "string",
                            "title": "SSH Host",
                            "description": "SSH host address"
                        },
                        "port": {
                            "type": "integer",
                            "title": "SSH Port",
                            "description": "Port number to connect to the SSH server"
                        },
                        "username": {
                            "type": "string",
                            "title": "SSH Username",
                            "description": "Username to authenticate with the SSH server"
                        },
                        "password": {
                            "type": "string",
                            "title": "SSH Password",
                            "description": "Password to authenticate with the SSH server",
                            "format": "password",
                            "minLength": 1
                        }
                    },
                    "required": [
                        "host",
                        "port",
                        "username",
                        "password",
                        "type"
                    ]
                }
            ]
        }
    },
    "required": [
        "hosts",
        "database"
    ],
    "dependencies": {
        "use_iam": {
            "oneOf": [
                {
                    "properties": {
                        "use_iam": {
                            "const": false
                        },
                        "password": { "type": "string", "minLength": 1 }
                    },
                    "required": [
                        "authdb",
                        "username",
                        "password"
                    ]
                },
                {
                    "properties": {
                        "use_iam": {
                            "const": true
                        }
                    }
                }
            ]
        }
    }
}